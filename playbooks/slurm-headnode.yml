---
# ===== Playbook de configuracion para el headnode =====
  
- name: Configuraciones especificas del Headnode
  hosts: headnode
  become: yes
  gather_facts: yes
  
  roles:
    - chrony_server
    - nfs_server
    - mariadb
    - slurmdbd
    - slurmctld
    - slurm_accounting
    - monitoring

  tasks:
    # Configurar Munge y SSH (roles con tasks_from espec√≠ficos)
    - name: Configurar Munge en headnode
      include_role:
        name: munge
        tasks_from: headnode

    - name: Configurar SSH keys en headnode
      include_role:
        name: ssh_keys
        tasks_from: headnode

  post_tasks:
    - name: Mensaje final de configuracion del headnode
      debug:
        msg:
          - "========================================="
          - "Configuracion del Headnode Completada"
          - "========================================="